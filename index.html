<html>
<head>Sembler Accounts</head>
<body>

<script>
    (function() {
        console.log('test')
        const domains = [
            "http://localhost:4200",
            "http://5c7c5227724ec11aba1fe397.sembler.io",
            "http://5c818042efa620d29359c892.sembler.io",
            "http://www.sembler.io",
            "http://sembler.io",
            "sembler.io"
        ]
        window.addEventListener("message", messageHandler, false);
        function messageHandler(event) {
            console.log('event.origin', event.origin)
            if (!domains.includes(event.origin))
                return;
            const { action, key, value } = event.data
            if (action == 'save'){
                console.log('saving');
                window.localStorage.setItem(key, JSON.stringify(value))
            } else if (action == 'get') {
                console.log('get');
                const keyT =  JSON.parse(window.localStorage.getItem(key));
                event.source.postMessage({
                    action: 'returnData',
                    key,
                   keyT
                }, '*')
            }
        }
    })()

</script>
</body>
</html>
